<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="erd">
	<!-- erd 생성 모든 컬럼 -->
	<insert id="addErdFull" parameterType="erdVo">
		insert into erd
			(erdno, erdtitle, erdscope, erdreadcnt, erdcdt, erdudt, erdcolor, memid, teamno)
		values
			(seq_erdno.nextval, #{erdTitle}, #{erdScope}, #{erdReadCnt}, sysdate, sysdate, #{erdColor}, #{memId}, #{teamNo})
	</insert>
	
	<!-- erd 생성하기 -->
	<insert id="addErd" parameterType="erdVo">
		<selectKey keyProperty="erdNo" resultType="int" order="BEFORE">
   			 select seq_erdno.nextval FROM DUAL
  		</selectKey>
		insert into erd
			(erdno, erdtitle, erdscope, erdcdt, memid, teamno)
		values
			(#{erdNo}, #{erdTitle}, #{erdScope}, sysdate, #{memId, jdbcType=VARCHAR}, nullif(#{teamNo},0))
			
	</insert>
	
	<!-- 나의 Erd리스트 가져오기 -->
	<select id="getMyErdList" parameterType="String" resultType="erdVo">
		select *
		from erd
		where memid = #{memId}
	</select>
	
</mapper>